(this.webpackJsonpteamui=this.webpackJsonpteamui||[]).push([[0],{23:function(e,t,a){},42:function(e,t,a){e.exports=a(54)},52:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),o=a.n(s),c=a(5),l=a(30),i=a(16),u=a(39),p=a(41),m=a(8),d=a(26),h={addUser:{type:"ADD_USER"},signIn:{type:"SIGNIN_USER"},createArticle:{type:"CREATE_ARTICLE"},logError:{type:"LOG_ERROR"},loadData:{type:"LOAD_DATA"},getData:{type:"GET_DATA"},loading:{type:"LOADING"},newUserSuccess:{type:"NEWUSER_SUCCESS"},newUserFailure:{type:"NEWUSER_FAILURE"},signInSuccess:{type:"SIGNIN_SUCCESS"},signInFailure:{type:"SIGNIN_FAILURE"},newArticleSuccess:{type:"NEWARTICLE_SUCCESS"},newArticleFailure:{type:"NEWARTICLE_FAILURE"}};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={name:"Teamwork!",errorMessage:"",formView:!0,loading:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.newUserSuccess.type:console.log("Getting NEW_USER_DATA from API");var a=t.newUserData;console.log(a);var n=Object(d.a)(e.users);n.push(t.newUserData);var r=Object.assign({},e,b({},e,{users:n}));return localStorage.setItem("TeamworkDB",JSON.stringify(r)),r;case h.newUserFailure.type:var s=t.newUserError;console.log("Error response from API",s);var o=Object.assign({},e,{});return o;case h.signInSuccess.type:console.log("Sign In Response");var c=t.signInData,l=c.data.token,i=c.name.email;console.log("signInData",c);var u=Object.assign({},e,b({},e,{signedIn:!0,tokenDetails:""}));return console.log("old token",u.tokenDetails),u.tokenDetails=l,u.userEmail=i.slice(0,i.indexOf("@")),console.log("old token",u.tokenDetails),localStorage.setItem("TeamworkDB",JSON.stringify(u)),console.log("kk",JSON.parse(localStorage.getItem("TeamworkDB"))),u;case h.signInFailure.type:console.log("Error response from API",t);var p=Object.assign({},e,b({},e,{signedIn:!1,tokenDetails:""}));return p;case h.newArticleSuccess.type:console.log("Getting NEW_ARTICLE_DATA from API");var m=t.newArticleData;console.log(m);var g=Object(d.a)(e.articles);g.push(t.newArticleData);var f=Object.assign({},e,b({},e,{articles:g}));return localStorage.setItem("TeamworkDB",JSON.stringify(f)),f;case h.newArticleFailure.type:var v=t.newArticleError;console.log("Error response from API",v);var O=Object.assign({},e,{});return O;case h.logError.type:var y=t.error;console.log("error-message: ",y);var w=Object.assign({},e,b({},e,{errorMessage:y}));return localStorage.setItem("TeamworkDB",JSON.stringify(w)),w;default:return localStorage.setItem("TeamworkDB",JSON.stringify(e)),e}},v=a(6),O=a.n(v),y=a(11),w=a(31),C=window.location.host.indexOf("localhost")>=0?"http://localhost:8000/api/v1":"https://obateamwork.herokuapp.com/api/v1",S="".concat(C,"/auth/create-user"),j="".concat(C,"/auth/signin"),N="".concat(C,"/articles"),k=function(){var e=Object(w.a)(O.a.mark((function e(t){var a,n,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(JSON.parse(localStorage.getItem("TeamworkDB")).tokenDetails),n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.prev=2,e.next=5,fetch(S,n);case 5:return r=e.sent,e.next=8,r.json();case 8:return s=e.sent,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(2),console.log("error response",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(w.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,fetch(j,a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,console.log("json response",r),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(1),console.log("error response",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(O.a.mark((function e(t){var a,n,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(JSON.parse(localStorage.getItem("TeamworkDB")).tokenDetails),n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.prev=2,e.next=5,fetch(N,n);case 5:return r=e.sent,e.next=8,r.json();case 8:return s=e.sent,console.log("json response",s),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(2),console.log("error response",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),I=O.a.mark(_),x=O.a.mark(T),D=O.a.mark(L),U=O.a.mark(P);function _(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"ADD_USER":t,a=e.newUser,r.prev=1,r.next=4,Object(y.a)(k,a);case 4:return n=r.sent,r.next=7,Object(y.b)({type:"NEWUSER_SUCCESS",newUserData:n});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(y.b)({type:"NEWUSER_FAILURE",newUserError:r.t0.message});case 13:case"end":return r.stop()}}),I,null,[[1,9]])}function T(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"SIGNIN_USER":t,a=e.user,r.prev=1,r.next=4,Object(y.a)(A,a);case 4:return(n=r.sent).name=a,r.next=8,Object(y.b)({type:"SIGNIN_SUCCESS",signInData:n});case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(1),r.next=14,Object(y.b)({type:"SIGNIN_FAILURE",signInError:r.t0.message});case 14:case"end":return r.stop()}}),x,null,[[1,10]])}function L(e){var t,a,n;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"CREATE_ARTICLE":t,a=e.newArticle,r.prev=1,r.next=4,Object(y.a)(R,a);case 4:return n=r.sent,r.next=7,Object(y.b)({type:"NEW_ARTICLE_SUCCESS",newArticleData:n});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(y.b)({type:"NEW_ARTICLE_FAILURE",newArticleError:r.t0.message});case 13:case"end":return r.stop()}}),D,null,[[1,9]])}function P(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)("ADD_USER",_);case 2:return e.next=4,Object(y.c)("SIGNIN_USER",T);case 4:return e.next=6,Object(y.c)("CREATE_ARTICLE",L);case 6:console.log("we are here");case 7:case"end":return e.stop()}}),U)}var G=P,W=Object(p.a)(),B=Object(i.createStore)(f,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(W)));W.run(G);var J=B,F=(a(52),a(22));a(23);var M=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{to:"/createuser",className:"links"},"Create New Account"),r.a.createElement(c.b,{to:"/signin",className:"links"},"Sign In"),r.a.createElement(c.b,{to:"/profile",className:"links"},"Profile"),r.a.createElement(c.b,{to:"/newarticle",className:"links"},"Write Article"),r.a.createElement("h1",null,"Welcome to Teamwork"),r.a.createElement("h3",null,"... where teams actually WORK!"),r.a.createElement("img",{src:"https://res.cloudinary.com/thevetdoctor/image/upload/v1574600900/teamwork/Penguins.jpg",alt:"Team Bond"}))},z=a(17),Y=a(18),K=a(20),V=a(19),$=a(9),q=a(21),H=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(K.a)(this,Object(V.a)(t).call(this,e))).state={firstName:"",lastName:"",email:"",password:"",gender:"",jobRole:"",department:"",address:""},a.handleChange=a.handleChange.bind(Object($.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object($.a)(a)),a}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.children[9].classList;console.log(t.toggle("inactive"))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["firstName","lastName","email","password","gender","jobRole","department","address"].indexOf(a)>=0&&this.setState((function(e){return Object(m.a)({},a,"")})),"undefined"!==a&&void 0!==a){if(""===n||""===n.trim())return t.classList.add("empty"),void console.log("".concat(a," is not supplied"));"age"===a&&isNaN(n)&&(t.classList.add("empty"),console.log("".concat(a," should be a number!"))),this.setState((function(e){return Object(m.a)({},a,n)}))}else console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{to:"/",className:"links"},"Back"),r.a.createElement(c.b,{to:"/signin",className:"links"},"Sign In"),r.a.createElement("h3",null,"New User Account"),"Please fill in user details",r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Enter Firstname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Enter Lastname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password1",placeholder:"Re-enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gender",placeholder:"Enter Gender",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"jobRole",placeholder:"What's the Job Role",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"department",placeholder:"Which Department",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"address",placeholder:"Enter Address",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"create-account",value:"Create account",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(K.a)(this,Object(V.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object($.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object($.a)(a)),a}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.children[2].classList;console.log(t.toggle("inactive"))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["email","password"].indexOf(a)>=0&&this.setState((function(e){return Object(m.a)({},a,"")})),"undefined"!==a&&void 0!==a)return""===n||""===n.trim()?(t.classList.add("empty"),void console.log("".concat(a," is not supplied"))):void this.setState((function(e){return Object(m.a)({},a,n)}));console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{to:"/",className:"links"},"Back"),r.a.createElement(c.b,{to:"/createuser",className:"links"},"Create New Account"),r.a.createElement("h3",null,"Sign In"),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"sign-in",value:"Sign In",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component);var X=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Oop! You missed your way"),r.a.createElement(c.b,{to:"/"},"Back to Teamwork"))},Z=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(K.a)(this,Object(V.a)(t).call(this,e))).state={firstName:"",lastName:"",email:"",password:"",gender:"",jobRole:"",department:"",address:""},a.handleChange=a.handleChange.bind(Object($.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object($.a)(a)),a}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.children[9].classList;console.log(t.toggle("inactive"))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["firstName","lastName","email","password","gender","jobRole","department","address"].indexOf(a)>=0&&this.setState((function(e){return Object(m.a)({},a,"")})),"undefined"!==a&&void 0!==a){if(""===n||""===n.trim())return t.classList.add("empty"),void console.log("".concat(a," is not supplied"));"age"===a&&isNaN(n)&&(t.classList.add("empty"),console.log("".concat(a," should be a number!"))),this.setState((function(e){return Object(m.a)({},a,n)}))}else console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{to:"/",className:"links"},"Back"),r.a.createElement("h3",null,"Welcome to your page, ",this.props.user?"".concat(this.props.user):"Guest"),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Enter Firstname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Enter Lastname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password1",placeholder:"Re-enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gender",placeholder:"Enter Gender",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"jobRole",placeholder:"What's the Job Role",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"department",placeholder:"Which Department",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"address",placeholder:"Enter Address",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"create-account",value:"Create account",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(K.a)(this,Object(V.a)(t).call(this,e))).state={title:"",article:""},a.handleChange=a.handleChange.bind(Object($.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object($.a)(a)),a}return Object(q.a)(t,e),Object(Y.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.children[2].classList;console.log(t.toggle("inactive"))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["email","password"].indexOf(a)>=0&&this.setState((function(e){return Object(m.a)({},a,"")})),"undefined"!==a&&void 0!==a)return""===n||""===n.trim()?(t.classList.add("empty"),void console.log("".concat(a," is not supplied"))):void this.setState((function(e){return Object(m.a)({},a,n)}));console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{to:"/",className:"links"},"Back"),r.a.createElement(c.b,{to:"/createuser",className:"links"},"Create New Article"),r.a.createElement("h3",null,"Write & Share"),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"title",placeholder:"Article Title",onChange:this.handleChange}),r.a.createElement("textarea",{type:"text",name:"article",placeholder:"Your Article",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"sign-in",value:"Post Article",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component);var te=function(){var e=J.getState(),t=Object(l.b)((function(e){return e.userEmail}));console.log(e);var a=function(t){var a=t.firstName,n=t.lastName,r=t.email,s=t.password,o=t.gender,c=t.jobRole,l=t.department,i=t.address,u="";for(var p in t)if(""===t[p])return u="".concat(p," not supplied!"),J.dispatch({type:"LOG_ERROR",error:u}),!1;var m={firstName:a,lastName:n,email:r,password:s,gender:o,jobRole:c,department:l,address:i},h=[].concat(Object(d.a)(e.users),[m]);console.log(h),u="",J.dispatch({type:"LOG_ERROR",error:u}),J.dispatch({type:"ADD_USER",newUser:m}),console.log("submitted","newUser =>",m)},n=function(e){var t=e.email,a=e.password,n="";for(var r in e)if(""===e[r])return console.log("item",r,e[r]?e:"not supplied"),n="".concat(r," not supplied!"),J.dispatch({type:"LOG_ERROR",error:n}),!1;var s={email:t,password:a};n="",J.dispatch({type:"LOG_ERROR",error:n}),J.dispatch({type:"SIGNIN_USER",user:s}),console.log("signed in",s)},s=function(e){console.log("input =>",e);var t=e.title,a=e.article;console.log(Object.values(e));var n="";for(var r in e)if(""===e[r])return console.log("item",r,e[r]?e:"not supplied"),n="".concat(r," not supplied!"),J.dispatch({type:"LOG_ERROR",error:n}),!1;var s={title:t,article:a};n="",J.dispatch({type:"LOG_ERROR",error:n}),J.dispatch({type:"CREATE_ARTICLE",newArticle:s}),console.log("new article",s)};return r.a.createElement(F.c,null,r.a.createElement(F.a,{path:"/",component:M,exact:!0}),r.a.createElement(F.a,{path:"/createuser",render:function(e){return r.a.createElement(H,Object.assign({},e,{onClick:a}))}}),r.a.createElement(F.a,{path:"/signin",render:function(e){return r.a.createElement(Q,Object.assign({},e,{onClick:n}))}}),r.a.createElement(F.a,{path:"/profile",render:function(e){return r.a.createElement(Z,Object.assign({},e,{onClick:n,user:t}))}}),r.a.createElement(F.a,{path:"/newarticle",render:function(e){return r.a.createElement(ee,Object.assign({},e,{onClick:s}))}}),r.a.createElement(F.a,{component:X}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(l.a,{store:J},r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.87a698ae.chunk.js.map