(this.webpackJsonpteamui=this.webpackJsonpteamui||[]).push([[0],{21:function(e,t,a){},41:function(e,t,a){e.exports=a(53)},51:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=a(5),l=a(29),i=a(22),u=a(38),m=a(40),p=a(8),d={addUser:{type:"ADD_USER"},signIn:{type:"SIGNIN_USER"},signOut:{type:"SIGN_OUT"},logUser:{type:"LOG_USER"},logError:{type:"LOG_ERROR"},postArticle:{type:"POST_ARTICLE"},newUserSuccess:{type:"NEWUSER_SUCCESS"},newUserFailure:{type:"NEWUSER_FAILURE"},signInSuccess:{type:"SIGNIN_SUCCESS"},signInFailure:{type:"SIGNIN_FAILURE"},newArticleSuccess:{type:"NEW_ARTICLE_SUCCESS"},newArticleFailure:{type:"NEW_ARTICLE_FAILURE"}};function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"Teamwork!",errorMessage:"",loading:!1,user:"",signedIn:!1,isAdmin:!1,articlePosted:!1,tokenDetails:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.newUserSuccess.type:console.log("Getting NEW_USER_DATA from API");var a,n=t.newUserData;return console.log(n),a="error"===n.status?Object.assign({},e,g({},e,{newUser:!1,errorMessage:n.error})):Object.assign({},e,g({},e,{newUser:!0})),localStorage.setItem("TeamworkDB",JSON.stringify(a)),a;case d.newUserFailure.type:var r=t.newUserError;console.log("Error response from API",r);var s=Object.assign({},e,{});return s;case d.signInSuccess.type:console.log("Sign In Response");var c=t.signInData,o=c.data,l=o.isAdmin,i=o.token;console.log(c);var u=Object.assign({},e,g({},e,{signedIn:!0,tokenDetails:i,isAdmin:l}));return localStorage.setItem("TeamworkDB",JSON.stringify(u)),u;case d.signInFailure.type:console.log("Error response from API",t);var m=Object.assign({},e,g({},e,{signedIn:!1,tokenDetails:""}));return localStorage.setItem("TeamworkDB",JSON.stringify(m)),m;case d.signOut.type:console.log("User signed out",t);var p=Object.assign({},e,g({},e,{signedIn:!1,isAdmin:!1,tokenDetails:""}));return localStorage.setItem("TeamworkDB",JSON.stringify(p)),p;case d.logUser.type:var h=t.email;console.log("user email: ",h);var E=Object.assign({},e,g({},e,{user:h.slice(0,h.indexOf("@"))}));return localStorage.setItem("TeamworkDB",JSON.stringify(E)),E;case d.logError.type:var f=t.error;console.log("error-message: ",f);var v=Object.assign({},e,g({},e,{errorMessage:f}));return localStorage.setItem("TeamworkDB",JSON.stringify(v)),v;case d.newArticleSuccess.type:console.log("Post Article Response");var O,y=t.newArticleData;return console.log(y),O="error"===y.status?Object.assign({},e,g({},e,{articlePosted:!1,errorMessage:y.error})):Object.assign({},e,g({},e,{articlePosted:!0})),console.log("new article state",O),localStorage.setItem("TeamworkDB",JSON.stringify(O)),O;case d.newArticleFailure.type:var S=t.articleError;console.log("Error response from API",t);var C=Object.assign({},e,g({},e,{errorMessage:S}));return localStorage.setItem("TeamworkDB",JSON.stringify(C)),C;default:return localStorage.setItem("TeamworkDB",JSON.stringify(e)),e}},f=a(6),v=a.n(f),O=a(11),y=a(30),S="http://localhost:8000/api/v1",C="".concat(S,"/auth/create-user"),j="".concat(S,"/auth/signin"),N="".concat(S,"/articles"),w="".concat(JSON.parse(localStorage.getItem("TeamworkDB")).tokenDetails),k=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},e.prev=1,e.next=4,fetch(C,a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("error response",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,fetch(j,a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("error response",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(JSON.parse(localStorage.getItem("TeamworkDB")).tokenDetails),n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.prev=2,e.next=5,fetch(N,n);case 5:return r=e.sent,e.next=8,r.json();case 8:return s=e.sent,console.log("json response",s,n),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(2),console.log("error response",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),A=v.a.mark(_),x=v.a.mark(P),U=v.a.mark(T),D=v.a.mark(L);function _(e){var t,a,n;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"ADD_USER":t,a=e.newUser,r.prev=1,r.next=4,Object(O.a)(k,a);case 4:return n=r.sent,r.next=7,Object(O.b)({type:"NEWUSER_SUCCESS",newUserData:n});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(O.b)({type:"NEWUSER_FAILURE",newUserError:r.t0.message});case 13:case"end":return r.stop()}}),A,null,[[1,9]])}function P(e){var t,a,n;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"SIGNIN_USER":t,a=e.user,r.prev=1,r.next=4,Object(O.a)(I,a);case 4:return n=r.sent,r.next=7,Object(O.b)({type:"SIGNIN_SUCCESS",signInData:n});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(O.b)({type:"SIGNIN_FAILURE",signInError:r.t0.message});case 13:case"end":return r.stop()}}),x,null,[[1,9]])}function T(e){var t,a,n;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,void 0===t?"POST_ARTICLE":t,a=e.newArticle,r.prev=1,r.next=4,Object(O.a)(R,a);case 4:return n=r.sent,r.next=7,Object(O.b)({type:"NEW_ARTICLE_SUCCESS",newArticleData:n});case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(O.b)({type:"NEW_ARTICLE_FAILURE",articleError:r.t0.message});case 13:case"end":return r.stop()}}),U,null,[[1,9]])}function L(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("ADD_USER",_);case 2:return e.next=4,Object(O.c)("SIGNIN_USER",P);case 4:return e.next=6,Object(O.c)("POST_ARTICLE",T);case 6:console.log("Redux Saga is on!");case 7:case"end":return e.stop()}}),D)}var G=L,W=Object(m.a)(),J=Object(i.createStore)(E,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(W)));W.run(G);var B=J,F=(a(51),a(23)),M=a(14),H=a(15),z=a(17),Y=a(16),K=a(18),$=(a(21),function(e){return r.a.createElement("span",{className:"links",onClick:e.onClick}," Sign Out ")}),q=function(e){function t(){return Object(M.a)(this,t),Object(z.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(K.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e.signedIn,a=e.signOut,n=e.isAdmin,s=e.user;return"teamaccess"===s&&(s="Admin"),r.a.createElement("div",{className:""},t?r.a.createElement("div",{className:"nav"},n?r.a.createElement("div",null,r.a.createElement(o.b,{to:"/createuser",className:"links"},"Create New Account")):r.a.createElement("div",null),r.a.createElement(o.b,{to:"/createarticle",className:"links"},"Create Article"),r.a.createElement(o.b,{to:"/profile",className:"links"},"Profile"),r.a.createElement($,{onClick:a})):r.a.createElement("div",{className:"nav"},r.a.createElement(o.b,{to:"/signin",className:"links"},"Sign In")),r.a.createElement("h3",null,"Welcome to Teamwork",s?", ".concat(s):", Guest"),r.a.createElement("h5",null,"... where teams actually WORK!"),r.a.createElement("img",{src:"https://res.cloudinary.com/thevetdoctor/image/upload/v1574600900/teamwork/Penguins.jpg",alt:"Team Bond"}))}}]),t}(n.Component),Q=a(9),V=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).state={firstName:"",lastName:"",email:"",password:"",gender:"",jobRole:"",department:"",address:""},a.handleChange=a.handleChange.bind(Object(Q.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(a)),a}return Object(K.a)(t,e),Object(H.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["firstName","lastName","email","password","gender","jobRole","department","address"].indexOf(a)>=0&&this.setState((function(e){return Object(p.a)({},a,"")})),"undefined"!==a&&void 0!==a){if(""===n||""===n.trim())return t.classList.add("empty"),void console.log("".concat(a," is not supplied"));"age"===a&&isNaN(n)&&(t.classList.add("empty"),console.log("".concat(a," should be a number!"))),this.setState((function(e){return Object(p.a)({},a,n)}))}else console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.errorMessage,n=t.user,s=t.signOut;return console.log(n),"teamaccess"===n&&(n="Admin"),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav"},r.a.createElement(o.b,{to:"/",className:"links"},"Home"),r.a.createElement($,{onClick:s})),r.a.createElement("h3",null,"New User Account"),"Please fill in user details",r.a.createElement("div",null,a?r.a.createElement("span",{className:"error"},a," "):r.a.createElement("span",null)),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Enter Firstname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Enter Lastname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password1",placeholder:"Re-enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gender",placeholder:"Enter Gender",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"jobRole",placeholder:"What's the Job Role",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"department",placeholder:"Which Department",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"address",placeholder:"Enter Address",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"create-account",value:"Create account",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(Q.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(a)),a}return Object(K.a)(t,e),Object(H.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;["email","password"].indexOf(a)>=0&&this.setState((function(e){return Object(p.a)({},a,"")})),"undefined"!==a&&void 0!==a&&(""!==n&&""!==n.trim()?this.setState((function(e){return Object(p.a)({},a,n)})):t.classList.add("empty"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.signedIn,n=t.errorMessage;return a?(console.log("signedin is true"),r.a.createElement(F.a,{to:"/"})):r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav"},r.a.createElement(o.b,{to:"/",className:"links"},"Home")),r.a.createElement("h3",null,"Sign In"),r.a.createElement("div",null,n?r.a.createElement("span",{className:"error"},n," "):r.a.createElement("span",null)),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"sign-in",value:"Sign In",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component);var Z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Oop! You missed your way"),r.a.createElement(o.b,{to:"/"},"Back to Teamwork"))},ee=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).state={firstName:"",lastName:"",email:"",password:"",gender:"",jobRole:"",department:"",address:""},a.handleChange=a.handleChange.bind(Object(Q.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(a)),a}return Object(K.a)(t,e),Object(H.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.children[9].classList;console.log(t.toggle("inactive"))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["firstName","lastName","email","password","gender","jobRole","department","address"].indexOf(a)>=0&&this.setState((function(e){return Object(p.a)({},a,"")})),"undefined"!==a&&void 0!==a){if(""===n||""===n.trim())return t.classList.add("empty"),void console.log("".concat(a," is not supplied"));"age"===a&&isNaN(n)&&(t.classList.add("empty"),console.log("".concat(a," should be a number!"))),this.setState((function(e){return Object(p.a)({},a,n)}))}else console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.signOut,n=t.user;return console.log(this.props),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav"},r.a.createElement(o.b,{to:"/",className:"links"},"Home"),r.a.createElement($,{onClick:a})),r.a.createElement("h3",null,"Welcome to your page, ",n),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"Enter Firstname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Enter Lastname",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"email",placeholder:"Put in Email",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password1",placeholder:"Re-enter Password",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gender",placeholder:"Enter Gender",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"jobRole",placeholder:"What's the Job Role",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"department",placeholder:"Which Department",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"address",placeholder:"Enter Address",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"create-account",value:"Create account",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(z.a)(this,Object(Y.a)(t).call(this,e))).state={title:"",article:""},a.handleChange=a.handleChange.bind(Object(Q.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(a)),a}return Object(K.a)(t,e),Object(H.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(["email","password"].indexOf(a)>=0&&this.setState((function(e){return Object(p.a)({},a,"")})),"undefined"!==a&&void 0!==a)return""===n||""===n.trim()?(t.classList.add("empty"),void console.log("".concat(a," is not supplied"))):void this.setState((function(e){return Object(p.a)({},a,n)}));console.log("name is undefined","target =>",t.parentNode,"val =>",n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.articlePosted,n=t.errorMessage,s=t.signOut;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav"},this.props.signedIn?r.a.createElement("div",null,r.a.createElement(o.b,{to:"/",className:"links"},"Home"),r.a.createElement(o.b,{to:"/profile",className:"links"},"Profile"),r.a.createElement($,{onClick:s})):r.a.createElement("div",null,r.a.createElement(o.b,{to:"/signin",className:"links"},"Sign In"))),r.a.createElement("div",null,n?r.a.createElement("span",{className:"error"},n," "):r.a.createElement("span",null)),a?r.a.createElement("div",null,r.a.createElement("h3",null,"Article posted, write another article? ")):r.a.createElement("div",null,r.a.createElement("h3",null,"Write & Share")),r.a.createElement("form",{className:"form-selector",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"title",placeholder:"Article Title",onChange:this.handleChange}),r.a.createElement("textarea",{type:"text",name:"article",placeholder:"Your Article",onChange:this.handleChange}),r.a.createElement("input",{className:"submit-inactive",type:"submit",name:"sign-in",value:"Post Article",onClick:function(){return e.props.onClick(e.state)}})))}}]),t}(n.Component);var ae=function(){var e=B.getState(),t=Object(l.b)((function(e){return e})),a=t.signedIn,n=t.user,s=t.isAdmin,c=t.errorMessage,o=t.articlePosted;console.log(e);var i=function(e){var t=e.firstName,a=e.lastName,n=e.email,r=e.password,s=e.gender,c=e.jobRole,o=e.department,l=e.address,i="";for(var u in e)if(""===e[u])return i="".concat(u," not supplied!"),B.dispatch({type:"LOG_ERROR",error:i}),!1;var m={firstName:t,lastName:a,email:n,password:r,gender:s,jobRole:c,department:o,address:l};i="",B.dispatch({type:"LOG_ERROR",error:i}),B.dispatch({type:"ADD_USER",newUser:m}),console.log("submitted","newUser =>",m)},u=function(e){var t=e.email,a=e.password,n="";for(var r in e)if(""===e[r])return console.log("item",r,e[r]?e:"not supplied"),n="".concat(r," not supplied!"),B.dispatch({type:"LOG_ERROR",error:n}),!1;var s={email:t,password:a};n="",B.dispatch({type:"LOG_ERROR",error:n}),B.dispatch({type:"LOG_USER",email:t}),B.dispatch({type:"SIGNIN_USER",user:s})},m=function(e){var t=e.title,a=e.article,n="";for(var r in e)if(""===e[r])return console.log("item",r,e[r]?e:"not supplied"),n="".concat(r," not supplied!"),B.dispatch({type:"LOG_ERROR",error:n}),!1;var s={title:t,article:a};n="",B.dispatch({type:"LOG_ERROR",error:n}),B.dispatch({type:"POST_ARTICLE",newArticle:s})},p=function(){console.log("am signing out!"),B.dispatch({type:"SIGN_OUT"})};return r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"/",render:function(e){return r.a.createElement(q,Object.assign({},e,{user:n,isAdmin:s,signedIn:a,signOut:p}))},exact:!0}),r.a.createElement(F.b,{path:"/createuser",render:function(e){return r.a.createElement(V,Object.assign({},e,{signedIn:a,user:n,errorMessage:c,onClick:i}))}}),r.a.createElement(F.b,{path:"/signin",render:function(e){return r.a.createElement(X,Object.assign({},e,{signedIn:a,errorMessage:c,onClick:u}))}}),r.a.createElement(F.b,{path:"/profile",render:function(e){return r.a.createElement(ee,Object.assign({},e,{user:n,onClick:u,signOut:p}))}}),r.a.createElement(F.b,{path:"/createarticle",render:function(e){return r.a.createElement(te,Object.assign({},e,{signedIn:a,errorMessage:c,articlePosted:o,onClick:m}))}}),r.a.createElement(F.b,{component:Z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(l.a,{store:B},r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.4e1ab12c.chunk.js.map